<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeneBot - Genetics Chatbot</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: #0a0a0a;
            color: #e0e0e0;
            line-height: 1.6;
            min-height: 100vh;
            padding: 0;
            display: flex;
            flex-direction: column;
        }

        /* Login Page Styles */
        .login-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            background: #0a0a0a;
        }

        .login-box {
            background: #151515;
            padding: 40px;
            border-radius: 15px;
            border: 1px solid #2a2a2a;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.5s ease;
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h1 {
            font-size: 2rem;
            color: #4a9eff;
            margin-bottom: 10px;
        }

        .login-header p {
            color: #888;
            font-size: 1rem;
        }

        .question-container {
            margin-bottom: 25px;
        }

        .question-text {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #e0e0e0;
            line-height: 1.5;
        }

        .answer-input {
            width: 100%;
            padding: 14px 18px;
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            border-radius: 10px;
            color: #e0e0e0;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s;
        }

        .answer-input:focus {
            border-color: #4a9eff;
        }

        .answer-input::placeholder {
            color: #666;
        }

        .submit-btn {
            width: 100%;
            padding: 14px;
            background: #4a9eff;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .submit-btn:hover {
            background: #3a8eef;
            transform: translateY(-2px);
        }

        .message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: 500;
            animation: fadeIn 0.3s ease;
        }

        .success-message {
            background: rgba(74, 222, 128, 0.1);
            color: #4ade80;
            border: 1px solid rgba(74, 222, 128, 0.2);
        }

        .error-message {
            background: rgba(248, 113, 113, 0.1);
            color: #f87171;
            border: 1px solid rgba(248, 113, 113, 0.2);
        }

        .info-message {
            background: rgba(96, 165, 250, 0.1);
            color: #60a5fa;
            border: 1px solid rgba(96, 165, 250, 0.2);
        }

        /* Chat Interface Styles (Initially Hidden) */
        .chat-interface {
            display: none;
            flex: 1;
            flex-direction: column;
            max-width: 100%;
            margin: 0;
            padding: 0;
        }

        .header {
            padding: 25px 20px 20px;
            background: #0a0a0a;
            text-align: left;
            border-bottom: 1px solid #1a1a1a;
        }

        .header h1 {
            font-size: 2rem;
            color: #4a9eff;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .header p {
            font-size: 1rem;
            opacity: 0.8;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            max-width: 70%;
            padding: 16px 20px;
            line-height: 1.5;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            background: #1a1a1a;
            color: white;
            align-self: flex-end;
            border-radius: 18px 18px 4px 18px;
        }

        .bot-message {
            background: #151515;
            align-self: flex-start;
            border-radius: 18px 18px 18px 4px;
        }

        .message strong {
            display: block;
            margin-bottom: 6px;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .input-area {
            padding: 20px;
            background: #0a0a0a;
            border-top: 1px solid #1a1a1a;
        }

        .chat-input-container {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            max-width: 100%;
        }

        .chat-input {
            flex: 1;
            display: flex;
            align-items: center;
            background: #1a1a1a;
            border-radius: 25px;
            padding: 5px;
        }

        .chat-input input {
            flex: 1;
            padding: 16px 20px;
            background: transparent;
            border: none;
            color: #e0e0e0;
            font-size: 1rem;
            outline: none;
            width: 100%;
        }

        .chat-input input::placeholder {
            color: #666;
        }

        .send-button {
            background: #4a9eff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            margin-right: 5px;
        }

        .send-button:hover {
            background: #3a8eef;
            transform: scale(1.05);
        }

        .send-button svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        .typing-indicator {
            display: none;
            padding: 16px 20px;
            align-self: flex-start;
            background: #151515;
            border-radius: 18px 18px 18px 4px;
            margin-bottom: 20px;
        }

        .typing-dots {
            display: flex;
            gap: 5px;
        }

        .typing-dots span {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background: #4a9eff;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dots span:nth-child(1) { animation-delay: 0s; }
        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
            30% { transform: translateY(-4px); opacity: 1; }
        }

        /* Scrollbar styling */
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #4a9eff;
            border-radius: 3px;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .login-box {
                padding: 30px 25px;
                margin: 15px;
            }
            
            .header {
                padding: 20px 15px 15px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .message {
                max-width: 85%;
            }
            
            .chat-messages {
                padding: 15px;
            }
            
            .input-area {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .login-box {
                padding: 25px 20px;
            }
            
            .login-header h1 {
                font-size: 1.6rem;
            }
            
            .question-text {
                font-size: 1rem;
            }
            
            .header h1 {
                font-size: 1.6rem;
            }
            
            .header p {
                font-size: 0.9rem;
            }
            
            .chat-input input {
                padding: 14px 16px;
                font-size: 0.95rem;
            }
            
            .send-button {
                width: 40px;
                height: 40px;
            }
        }
    </style>
</head>
<body>
    <!-- Login Page (Initially Visible) -->
    <div id="login-container" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <h1>GeneBot Access</h1>
                <p>Answer the biology/chemistry question to access the genetics chatbot</p>
            </div>
            
            <div class="question-container">
                <div id="question-text" class="question-text">
                    <!-- Question will be inserted here -->
                </div>
                <input type="text" 
                       id="answer-input" 
                       class="answer-input" 
                       placeholder="Enter your answer..."
                       autocomplete="off">
            </div>
            
            <button id="submit-btn" class="submit-btn">Submit Answer</button>
            
            <div id="message-container" style="display: none;">
                <!-- Messages will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Chat Interface (Initially Hidden) -->
    <div id="chat-interface" class="chat-interface">
        <div class="header">
            <h1>GeneBot</h1>
            <p>Your AI assistant for genetics concepts</p>
        </div>

        <div class="chat-interface">
            <div id="chat-messages" class="chat-messages">
                <div class="message bot-message">
                    <strong>GeneBot:</strong> Hello! I'm your genetics assistant. I am being trained in Genetics.
                </div>
            </div>
            
            <div class="typing-indicator" id="typing-indicator">
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            
            <div class="input-area">
                <div class="chat-input-container">
                    <div class="chat-input">
                        <input type="text" id="user-input" placeholder="Ask about genetics..." maxlength="500">
                        <button class="send-button" onclick="sendMessage()">
                            <svg viewBox="0 0 24 24">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===============================
        // LOGIN QUESTIONS & ANSWERS
        // ===============================
        const questions = [
            {
                question: "Adenine Pairs with ?",
                answer: "Thymine",
                hint: "Think about DNA base pairing rules (A pairs with...)"
            },
            {
                question: "Guanine has ______ H-Bonds.",
                answer: "3",
                hint: "Guanine forms three hydrogen bonds with its complementary base"
            },
            {
                question: "cDNA don't have Introns or Exons?",
                answer: "Introns",
                hint: "cDNA is complementary DNA synthesized from mRNA, which has already had introns removed"
            },
            {
                question: "In dsDNA adenine % is 20% then Cytosine+Thymine % is?",
                answer: "50%",
                hint: "Remember Chargaff's rules: A=T and G=C, total percentage is 100%"
            },
            {
                question: "Who is more Thermolabile RNA or DNA?",
                answer: "RNA",
                hint: "RNA has a 2'-OH group that makes it more susceptible to hydrolysis at high temperatures"
            }
        ];

        // ===============================
        // INITIALIZATION
        // ===============================
        document.addEventListener('DOMContentLoaded', function() {
            // Show random question on login page
            const randomIndex = Math.floor(Math.random() * questions.length);
            const selectedQuestion = questions[randomIndex];
            document.getElementById('question-text').textContent = selectedQuestion.question;
            
            // Store correct answer for validation
            document.getElementById('question-text').dataset.correctAnswer = selectedQuestion.answer;
            document.getElementById('question-text').dataset.questionHint = selectedQuestion.hint;
            
            // Setup submit button event listener
            document.getElementById('submit-btn').addEventListener('click', validateAnswer);
            
            // Setup Enter key for answer input
            document.getElementById('answer-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    validateAnswer();
                }
            });
            
            // Focus on answer input
            document.getElementById('answer-input').focus();
        });

        // ===============================
        // ANSWER VALIDATION
        // ===============================
        function validateAnswer() {
            const userAnswer = document.getElementById('answer-input').value.trim();
            const correctAnswer = document.getElementById('question-text').dataset.correctAnswer;
            const hint = document.getElementById('question-text').dataset.questionHint;
            const messageContainer = document.getElementById('message-container');
            
            // Clear previous messages
            messageContainer.innerHTML = '';
            messageContainer.style.display = 'none';
            
            if (!userAnswer) {
                showMessage('Please enter an answer', 'error');
                return;
            }
            
            // Normalize answers for comparison (case-insensitive, remove spaces/punctuation)
            const normalizedUserAnswer = userAnswer.toLowerCase().replace(/[^a-z0-9%]/g, '');
            const normalizedCorrectAnswer = correctAnswer.toLowerCase().replace(/[^a-z0-9%]/g, '');
            
            if (normalizedUserAnswer === normalizedCorrectAnswer) {
                // Correct answer - show success and grant access
                showMessage('Correct! Access granted. Loading GeneBot...', 'success');
                
                // Hide login and show chat after delay
                setTimeout(() => {
                    document.getElementById('login-container').style.display = 'none';
                    document.getElementById('chat-interface').style.display = 'flex';
                    
                    // Initialize chat functionality
                    initializeChat();
                }, 1500);
            } else {
                // Wrong answer - show error with hint
                showMessage(`Access denied. Wrong answer. Hint: ${hint}`, 'error');
                
                // Clear input and focus
                document.getElementById('answer-input').value = '';
                document.getElementById('answer-input').focus();
            }
        }

        function showMessage(text, type) {
            const messageContainer = document.getElementById('message-container');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}-message`;
            messageDiv.textContent = text;
            messageContainer.appendChild(messageDiv);
            messageContainer.style.display = 'block';
            
            // Auto-hide success messages after 3 seconds
            if (type === 'success') {
                setTimeout(() => {
                    messageContainer.style.display = 'none';
                }, 3000);
            }
        }

        // ===============================
        // CHAT FUNCTIONALITY (Only initialized after successful login)
        // ===============================
        function initializeChat() {
            // Add Enter key support for chat
            document.getElementById('user-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Focus on chat input
            document.getElementById('user-input').focus();
        }

        // ===============================
        // GENETICS KNOWLEDGE BASE
        // ===============================
        const geneticsKnowledge = {
            "dna": "DNA (Deoxyribonucleic Acid) is the hereditary material in humans and almost all other organisms. It contains the genetic instructions for development, functioning, growth, and reproduction.",
            "rna": "RNA (Ribonucleic Acid) is a nucleic acid that plays crucial roles in coding, decoding, regulation, and expression of genes. Major types include mRNA, tRNA, and rRNA.",
            "gene": "A gene is the basic physical and functional unit of heredity. Genes are made up of DNA and act as instructions to make molecules called proteins.",
            "chromosome": "Chromosomes are thread-like structures located inside the nucleus of animal and plant cells. Each chromosome is made of protein and a single molecule of DNA.",
            "mutation": "A mutation is a change in a DNA sequence. Mutations can result from DNA copying mistakes, exposure to radiation or chemicals, or viral infection.",
            "protein": "Proteins are large, complex molecules that play many critical roles in the body. They do most of the work in cells and are required for the structure, function, and regulation of the body's tissues and organs.",
            "transcription": "Transcription is the process of making an RNA copy of a gene's DNA sequence. This copy, called mRNA, carries the genetic information needed to make proteins.",
            "translation": "Translation is the process where ribosomes in the cytoplasm or ER synthesize proteins after transcription of DNA to RNA in the cell's nucleus.",
            "genotype": "Genotype refers to the genetic constitution of an individual organism. It represents the specific allele combination for a particular gene.",
            "phenotype": "Phenotype refers to the observable physical properties of an organism including appearance, development, and behavior.",
            "allele": "An allele is one of two or more versions of a gene. An individual inherits two alleles for each gene, one from each parent.",
            "heredity": "Heredity is the passing of genetic traits from parents to their offspring through sexual or asexual reproduction.",
            "genome": "A genome is an organism's complete set of DNA, including all of its genes. The human genome contains about 3 billion base pairs.",
            "mitosis": "Mitosis is a process of cell division that results in two genetically identical daughter cells developing from a single parent cell.",
            "meiosis": "Meiosis is a special type of cell division that produces gametes (sperm and egg cells) with half the number of chromosomes of the parent cell."
        };

        function sendMessage() {
            const userInput = document.getElementById('user-input');
            const message = userInput.value.trim();
            
            if (!message) return;
            
            // Add user message to chat
            addMessageToChat('user', message);
            userInput.value = '';
            
            // Show typing indicator
            const typingIndicator = document.getElementById('typing-indicator');
            typingIndicator.style.display = 'block';
            
            // Generate bot response after a short delay
            setTimeout(() => {
                typingIndicator.style.display = 'none';
                const response = generateBotResponse(message);
                addMessageToChat('bot', response);
            }, 800 + Math.random() * 800);
        }

        function generateBotResponse(userInput) {
            const input = userInput.toLowerCase().trim();
            
            // Check for greetings
            if (input.includes('hello') || input.includes('hi') || input.includes('hey')) {
                return "Hello! I'm GeneBot, your genetics assistant. I am being trained in Genetics.";
            }
            
            // Check for thanks
            if (input.includes('thank') || input.includes('thanks')) {
                return "You're welcome! I'm happy to help with your genetics questions.";
            }
            
            // Direct concept lookup
            for (const [concept, definition] of Object.entries(geneticsKnowledge)) {
                if (input.includes(concept)) {
                    return definition;
                }
            }
            
            // Pattern-based responses
            if (input.includes('what is') || input.includes('tell me about') || input.includes('explain') || input.includes('define')) {
                for (const concept in geneticsKnowledge) {
                    if (input.includes(concept)) {
                        return geneticsKnowledge[concept];
                    }
                }
                return "I can explain various genetics concepts like DNA, RNA, genes, chromosomes, mutations, proteins, transcription, translation, genotype, phenotype, alleles, heredity, genome, mitosis, and meiosis. Which specific concept would you like me to explain?";
            }
            
            if (input.includes('difference between') || input.includes('different from') || input.includes('compare')) {
                if (input.includes('dna') && input.includes('rna')) {
                    return "DNA vs RNA: DNA is double-stranded and contains deoxyribose sugar, while RNA is single-stranded and contains ribose sugar. DNA uses thymine (T) as a base, while RNA uses uracil (U). DNA stores genetic information long-term, while RNA acts as a messenger and plays various roles in protein synthesis.";
                }
                if (input.includes('genotype') && input.includes('phenotype')) {
                    return "Genotype vs Phenotype: Genotype refers to the genetic makeup (specific alleles) of an organism, while phenotype refers to the observable physical characteristics. Genotype influences phenotype, but environmental factors can also affect phenotypic expression.";
                }
                if (input.includes('mitosis') && input.includes('meiosis')) {
                    return "Mitosis vs Meiosis: Mitosis produces two identical diploid daughter cells for growth and repair, while meiosis produces four genetically diverse haploid gametes for sexual reproduction. Meiosis involves two divisions and genetic recombination through crossing over.";
                }
            }
            
            if (input.includes('how does') || input.includes('how do') || input.includes('how is')) {
                if (input.includes('transcription')) {
                    return "Transcription works in three main steps: 1) Initiation - RNA polymerase binds to promoter region of DNA, 2) Elongation - RNA polymerase builds mRNA complementary to the DNA template strand, 3) Termination - mRNA transcript is released and RNA polymerase detaches from DNA.";
                }
                if (input.includes('translation')) {
                    return "Translation works by ribosomes reading mRNA codons and assembling amino acids into proteins: 1) Initiation - ribosome assembles around start codon, 2) Elongation - tRNA brings amino acids, ribosome forms peptide bonds, 3) Termination - stop codon signals release of completed protein.";
                }
                if (input.includes('dna replication')) {
                    return "DNA replication is semi-conservative and involves: 1) Helicase unwinds DNA double helix, 2) Primase adds RNA primers, 3) DNA polymerase adds complementary nucleotides, 4) Leading strand is continuous, lagging strand is in Okazaki fragments, 5) Ligase joins fragments together.";
                }
            }
            
            // Default response
            return "I'm still learning about genetics. Could you try asking about specific concepts like DNA, RNA, genes, or mutations?";
        }

        function addMessageToChat(sender, message) {
            const chatMessages = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            messageDiv.innerHTML = `<strong>${sender === 'user' ? 'You' : 'GeneBot'}:</strong> ${escapeHtml(message)}`;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // ===============================
        // UTILITY FUNCTIONS
        // ===============================
        function escapeHtml(unsafe) {
            if (!unsafe) return '';
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }
    </script>
</body>
</html>
